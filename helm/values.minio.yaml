# Example Helm values for deploying Unity Catalog with MinIO S3-compatible storage
#
# This configuration demonstrates how to use Unity Catalog with MinIO instead of AWS S3.
# MinIO is an open-source S3-compatible object storage service.
#
# Usage:
#   helm install unity-catalog ./helm -f helm/values.minio.yaml

storage:
  # Model storage root - can point to MinIO or local file system
  modelStorageRoot: s3://unity-models/root

  credentials:
    # S3-compatible storage configuration with MinIO
    s3:
      # Example 1: MinIO bucket with custom endpoint
      - bucketPath: s3://unity-catalog-data
        region: us-east-1  # Region is still required (MinIO uses this for compatibility)
        # Service endpoint for MinIO - this tells Unity Catalog to use MinIO instead of AWS S3
        serviceEndpoint: https://minio.example.com:9000
        # Kubernetes secret containing MinIO credentials
        credentialsSecretName: minio-credentials

      # Example 2: AWS S3 bucket (standard configuration without serviceEndpoint)
      - bucketPath: s3://aws-backup-bucket
        region: us-west-2
        awsRoleArn: arn:aws:iam::123456789012:role/UnityRole
        credentialsSecretName: aws-s3-credentials

# Note: Create the MinIO credentials secret before deploying:
#
# kubectl create secret generic minio-credentials \
#   --from-literal=accessKey=minioadmin \
#   --from-literal=secretKey=minioadmin
#
# For AWS S3 credentials:
#
# kubectl create secret generic aws-s3-credentials \
#   --from-literal=accessKey=AKIAIOSFODNN7EXAMPLE \
#   --from-literal=secretKey=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# Server configuration
server:
  enabled: true
  
  deployment:
    replicas: 1
    
  # Optional: Configure resource limits
  # resources:
  #   requests:
  #     memory: "512Mi"
  #     cpu: "500m"
  #   limits:
  #     memory: "2Gi"
  #     cpu: "2000m"

# Database configuration
# By default uses H2 file database, but PostgreSQL is recommended for production
# server:
#   db:
#     type: postgresql
#     postgresqlConfig:
#       host: postgres.example.com
#       port: 5432
#       dbName: unitycatalog
#       username: ucuser
#       passwordSecretName: postgres-password

# Authentication (optional)
auth:
  enabled: false
  # provider: google
  # clientSecretName: oauth-client-secret
  # authorizationUrl: https://accounts.google.com/o/oauth2/auth
  # tokenUrl: https://oauth2.googleapis.com/token

# UI configuration
ui:
  enabled: true
  
  service:
    type: ClusterIP
    port: 3000

# Ingress configuration (optional)
# ingress:
#   enabled: true
#   className: nginx
#   hosts:
#     - host: unity-catalog.example.com
#       paths:
#         - path: /
#           pathType: Prefix
#   tls:
#     - secretName: unity-catalog-tls
#       hosts:
#         - unity-catalog.example.com

# Advanced: Multiple S3-compatible providers
# You can configure multiple S3-compatible storage backends simultaneously:
#
# storage:
#   credentials:
#     s3:
#       # MinIO instance 1
#       - bucketPath: s3://minio1-bucket
#         region: us-east-1
#         serviceEndpoint: https://minio1.example.com:9000
#         credentialsSecretName: minio1-credentials
#       
#       # MinIO instance 2
#       - bucketPath: s3://minio2-bucket
#         region: us-east-1
#         serviceEndpoint: https://minio2.example.com:9000
#         credentialsSecretName: minio2-credentials
#       
#       # Wasabi S3-compatible storage
#       - bucketPath: s3://wasabi-bucket
#         region: us-east-1
#         serviceEndpoint: https://s3.us-east-1.wasabisys.com
#         credentialsSecretName: wasabi-credentials
#       
#       # Standard AWS S3 (no serviceEndpoint)
#       - bucketPath: s3://aws-s3-bucket
#         region: us-west-2
#         awsRoleArn: arn:aws:iam::123456789012:role/UnityRole
#         credentialsSecretName: aws-credentials
